<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Browse - Scale Up</title>
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="../imagecarousel.css">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #f5f6fa;
      font-family: 'Inter', system-ui, sans-serif;
      overflow-x: hidden;
    }
    body {
      min-height: 100vh;
      width: 100vw;
      overflow-x: hidden;
    }
    .browse-header {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      background: #fff;
      padding: 20px 32px 10px 32px;
      border-bottom: 1px solid #e8eaf0;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .search-bar {
      display: flex;
      align-items: center;
      gap: 10px;
      background: #f0f1f7;
      border-radius: 10px;
      padding: 8px 14px;
      flex: 1;
      max-width: 420px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      margin-right: 24px;
    }
    .search-bar input[type="text"] {
      border: none;
      background: transparent;
      outline: none;
      font-size: 1rem;
      flex: 1;
      padding: 6px 0;
    }
    .search-icon-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
    }
    .search-icon-btn svg {
      width: 22px;
      height: 22px;
    }
    .filter-btn {
      background: #fff;
      border: 1.5px solid #5b6cff;
      color: #5b6cff;
      border-radius: 10px;
      padding: 8px 22px 8px 12px;
      font-size: 1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 9px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(91,108,255,0.09);
      transition: background .18s, color .18s, border .18s;
      position: relative;
      z-index: 20;
    }
    .filter-btn svg {
      width: 21px;
      height: 21px;
      fill: #5b6cff;
    }
    /* Filter Popover styles */
    .filter-popover {
      display: none;
      position: absolute;
      left: 0;
      top: 110%;
      min-width: 350px;
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 10px 40px rgba(91,108,255,0.13), 0 2px 10px rgba(38,40,71,0.06);
      padding: 32px 32px 20px 32px;
      z-index: 99;
      flex-direction: column;
      gap: 21px;
      animation: popFadeIn .18s;
      /* Make sure it is visible to the left of the button, not right */
      transform: translateX(-85%);
    }
    @keyframes popFadeIn {
      from { opacity: 0; transform: translateY(8px) translateX(-85%);}
      to { opacity: 1; transform: translateY(0) translateX(-85%);}
    }
    .filter-row {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 18px;
      flex-wrap: wrap;
    }
    .filter-label {
      font-size: 0.99rem;
      font-weight: 500;
      margin-right: 7px;
      color: #3a465e;
      min-width: 52px;
    }
    .star-filter {
      display: flex;
      gap: 4px;
    }
    .star {
      font-size: 1.4rem;
      color: #ffd700;
      cursor: pointer;
      filter: drop-shadow(0 1px 3px #ffd70033);
      transition: transform .13s;
    }
    .star.inactive {
      color: #e0e0e0;
      filter: none;
    }
    .filter-input {
      border: 1px solid #e0e4f0;
      border-radius: 8px;
      padding: 7px 13px;
      font-size: 1rem;
      min-width: 110px;
      background: #f7f8fc;
      color: #222b3a;
      outline: none;
      transition: border .18s;
    }
    .filter-type-select {
      min-width: 120px;
    }
    .filter-actions {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-top: 8px;
    }
    .filter-action-btn {
      border: none;
      border-radius: 8px;
      padding: 8px 22px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background .18s;
    }
    .filter-action-btn.apply {
      background: #5b6cff;
      color: #fff;
    }
    .filter-action-btn.cancel {
      background: #f0f1f7;
      color: #3a465e;
    }
    html, body {
      overflow-x: hidden !important;
    }
    @media (max-width: 700px) {
      .browse-header {
        flex-direction: column;
        align-items: stretch;
        gap: 14px;
        padding: 16px 10px 6px 10px;
      }
      .filter-btn {
        margin-left: 0;
        margin-top: 12px;
      }
      .filter-popover {
        left: 0;
        min-width: 92vw;
        padding: 18px 4vw 10px 4vw;
        transform: translateX(0);
      }
      @keyframes popFadeIn {
        from { opacity: 0; transform: translateY(8px);}
        to { opacity: 1; transform: translateY(0);}
      }
    }
  </style>
</head>
<body>
<header class="browse-header" style="position:relative;">
  <!-- Search Bar -->
  <form class="search-bar" id="browseSearchForm" autocomplete="off" onsubmit="return false;">
    <input type="text" id="searchInput" placeholder="Search businesses, products, or keywords..." />
    <button class="search-icon-btn" id="searchBtn" aria-label="Search">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" 
        xmlns="http://www.w3.org/2000/svg">
        <circle cx="10" cy="10" r="7" stroke="#5b6cff" stroke-width="2"/>
        <line x1="15.293" y1="15.707" x2="20" y2="20" stroke="#5b6cff" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </form>
  <!-- Filter Button - now aligned right -->
  <div style="position:relative;display:inline-block;margin-left:auto;">
    <button class="filter-btn" id="filterBtn" type="button">
      <svg viewBox="0 0 24 24"><path d="M3 5h18v2H3V5zm3 7h12v2H6v-2zm3 7h6v2H9v-2z"></path></svg>
      Filter
    </button>
    <!-- Filter Popover (initially hidden) -->
    <div class="filter-popover" id="filterPopover">
      <!-- Star count filter -->
      <div class="filter-row" id="starRow">
        <span class="filter-label">Star</span>
        <span class="star" data-star="5">&#9733;</span>
        <span class="star" data-star="4">&#9733;</span>
        <span class="star" data-star="3">&#9733;</span>
        <span class="star" data-star="2">&#9733;</span>
        <span class="star" data-star="1">&#9733;</span>
      </div>
      <!-- Investment filter -->
      <div class="filter-row">
        <span class="filter-label">Investment</span>
        <input type="number" min="0" placeholder="₱ min" class="filter-input" id="investmentMin" />
        <span>-</span>
        <input type="number" min="0" placeholder="₱ max" class="filter-input" id="investmentMax" />
      </div>
      <!-- Type filter -->
      <div class="filter-row">
        <span class="filter-label">Type</span>
        <select class="filter-input filter-type-select" id="typeFilter">
          <option value="">Any</option>
          <option value="food">Food</option>
          <option value="fashion">Fashion</option>
          <option value="tech">Tech</option>
          <option value="services">Services</option>
          <option value="arts">Arts</option>
          <option value="health">Health</option>
          <option value="local">Local</option>
          <option value="other">Other</option>
        </select>
      </div>
      <!-- Product name filter -->
      <div class="filter-row">
        <span class="filter-label">Product</span>
        <input type="text" class="filter-input" id="productNameFilter" placeholder="Product name..." />
      </div>
      <!-- Actions -->
      <div class="filter-actions">
        <button class="filter-action-btn cancel" id="cancelFilterBtn" type="button">Cancel</button>
        <button class="filter-action-btn apply" id="applyFilterBtn" type="button">Apply Filter</button>
      </div>
    </div>
  </div>
</header>

  <!-- You can add your product/business browse grid/list here -->

  <script>
    // Filter Popover Logic
    const filterBtn = document.getElementById('filterBtn');
    const filterPopover = document.getElementById('filterPopover');
    const cancelFilterBtn = document.getElementById('cancelFilterBtn');
    const applyFilterBtn = document.getElementById('applyFilterBtn');
    const stars = Array.from(document.querySelectorAll('.star'));
    let selectedStar = null;

    // Show/Hide filter popover directly under and left-aligned with the filter button
    filterBtn.onclick = (e) => {
      e.stopPropagation();
      // Place the popover just below and left-aligned with the filter button
      if (filterPopover.style.display === 'flex') {
        filterPopover.style.display = 'none';
      } else {
        filterPopover.style.display = 'flex';
      }
    };

    // Hide popover when clicking outside (but do not block UI, so just hide)
    document.addEventListener('mousedown', function(e) {
      if (filterPopover.style.display === 'flex' &&
          !filterPopover.contains(e.target) &&
          !filterBtn.contains(e.target)) {
        filterPopover.style.display = 'none';
      }
    });

    // Star filter logic
    stars.forEach(star => {
      star.onclick = () => {
        selectedStar = +star.dataset.star;
        stars.forEach(s => s.classList.toggle('inactive', +s.dataset.star !== selectedStar));
      };
    });

    // Cancel filter
    cancelFilterBtn.onclick = () => {
      filterPopover.style.display = 'none';
    };
    // Apply filter
    applyFilterBtn.onclick = () => {
      const investmentMin = document.getElementById('investmentMin').value;
      const investmentMax = document.getElementById('investmentMax').value;
      const type = document.getElementById('typeFilter').value;
      const productName = document.getElementById('productNameFilter').value;

      // Replace this with your filter logic
      alert(
        "Apply Filter:\n" +
        "Star: " + (selectedStar || "Any") + "\n" +
        "Investment: " + investmentMin + " - " + investmentMax + "\n" +
        "Type: " + (type || "Any") + "\n" +
        "Product: " + productName
      );

      filterPopover.style.display = 'none';
    };

    // Search logic
    document.getElementById('searchBtn').onclick = () => {
      alert("Search: " + document.getElementById('searchInput').value);
    };
    document.getElementById('searchInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        document.getElementById('searchBtn').click();
      }
    });
  </script>
</body>
</html>